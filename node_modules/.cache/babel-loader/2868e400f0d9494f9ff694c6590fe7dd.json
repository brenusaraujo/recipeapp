{"ast":null,"code":"import _slicedToArray from\"/Users/brenoaraujo/projects-to-github/RecipeApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{useHistory}from'react-router';import Card from'../components/Card';import{getDoneRecipes,getFavoriteRecipes,getRecipeProgress,setFavoriteRecipes}from'../services/localStorage';import'../css/RecipeDetails.css';import RecipesContext from'../context/RecipesContext';import ShareButton from'../components/ShareButton';import FavoriteButton from'../components/FavoriteButton';import{requestFoodsOrDrinks,requestRecipesById}from'../services/fetchAPIs';var currentURL=window.location.href;var MAX_RECOMENDATION_CARDS=6;function BeverageDetails(props){var id=props.match.params.id;var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),recipeInfo=_useState2[0],setRecipeInfo=_useState2[1];var strDrinkThumb=recipeInfo.strDrinkThumb,strDrink=recipeInfo.strDrink,strCategory=recipeInfo.strCategory,strAlcoholic=recipeInfo.strAlcoholic,strInstructions=recipeInfo.strInstructions;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDone=_useState4[0],setIsDone=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isInProgress=_useState6[0],setIsInProgressDone=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),renderRecomendations=_useState8[0],setRecomendations=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isFavorite=_useState10[0],setIsFavorite=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isCopied=_useState12[0],setIsCopied=_useState12[1];var _useContext=useContext(RecipesContext),sliceIngredients=_useContext.sliceIngredients,sliceMeasures=_useContext.sliceMeasures;useEffect(function(){if(getDoneRecipes()){var currentRecipeIsDone=getDoneRecipes().find(function(recipe){return recipe.id===id;});return setIsDone(currentRecipeIsDone);}return setIsDone(false);},[id]);useEffect(function(){if(getRecipeProgress()){var currentRecipeIsInProgress=!!getRecipeProgress().cocktails[id];return setIsInProgressDone(currentRecipeIsInProgress);}return setIsInProgressDone(false);},[id]);useEffect(function(){requestRecipesById(id,'thecocktaildb').then(function(_ref){var drinks=_ref.drinks;return setRecipeInfo(drinks[0]);});},[id]);useEffect(function(){requestFoodsOrDrinks('themealdb').then(function(_ref2){var meals=_ref2.meals;return setRecomendations(meals.slice(0,MAX_RECOMENDATION_CARDS));});},[]);useEffect(function(){if(getFavoriteRecipes()){return setIsFavorite(getFavoriteRecipes().find(function(recipe){return recipe.id===id;}));}setFavoriteRecipes([]);},[id]);var ingredientsList=sliceIngredients(recipeInfo);var measuresList=sliceMeasures(recipeInfo);var handleFavoriteDependencies={id:id,type:'bebida',area:'',category:strCategory,alcoholicOrNot:strAlcoholic,name:strDrink,image:strDrinkThumb};return/*#__PURE__*/React.createElement(\"div\",{className:\"page-container\"},/*#__PURE__*/React.createElement(\"img\",{className:\"details__image\",src:strDrinkThumb,alt:\"food\",\"data-testid\":\"recipe-photo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"title-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"titles\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"details__category\",\"data-testid\":\"recipe-category\"},strAlcoholic),/*#__PURE__*/React.createElement(\"h1\",{className:\"details__title\",\"data-testid\":\"recipe-title\"},strDrink)),/*#__PURE__*/React.createElement(\"div\",{className:\"details\"},/*#__PURE__*/React.createElement(ShareButton,{textToCopy:currentURL,setIsCopied:setIsCopied,isCopied:isCopied}),/*#__PURE__*/React.createElement(FavoriteButton,{isFavorite:isFavorite,setIsFavorite:setIsFavorite,id:id,favoriteDependencies:handleFavoriteDependencies}))),/*#__PURE__*/React.createElement(\"p\",{className:\"details__description margin-left\"},\"Ingredientes:\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"ingredient-list\"},ingredientsList.map(function(ingredient,index){return/*#__PURE__*/React.createElement(\"li\",{className:\"details__ingredient\",key:ingredient,\"data-testid\":\"\".concat(index,\"-ingredient-name-and-measure\")},/*#__PURE__*/React.createElement(\"span\",{className:\"details__ingredient-name\"},\"\".concat(ingredient,\": \")),measuresList[index]?/*#__PURE__*/React.createElement(\"span\",{className:\"details__measure\"},measuresList[index]):'');})),/*#__PURE__*/React.createElement(\"p\",{className:\"details__description--instructions\"},\"Instru\\xE7\\xF5es:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"details__instructions\",\"data-testid\":\"instructions\"},strInstructions),/*#__PURE__*/React.createElement(\"div\",{className:\"recomended\"},/*#__PURE__*/React.createElement(\"p\",{className:\"details__description center-this\"},\"\\xD3timos acompanhamentos:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"carousel\"},renderRecomendations&&renderRecomendations.map(function(food,index){return/*#__PURE__*/React.createElement(Card,{id:\"idMeal\",itemId:food.idMeal,header:food.strMeal,img:food.strMealThumb,index:index,key:food.idMeal,testId:\"\".concat(index,\"-recomendation-card\")});}))),/*#__PURE__*/React.createElement(\"button\",{className:isDone?'hidden-start-recipe-btn':'login__btn start-recipe',type:\"button\",onClick:function onClick(){return history.push(\"/bebidas/\".concat(id,\"/in-progress\"));},\"data-testid\":\"start-recipe-btn\"},isInProgress?'Continuar Receita':'Iniciar Receita'));}export default BeverageDetails;","map":{"version":3,"names":["React","useContext","useEffect","useState","useHistory","Card","getDoneRecipes","getFavoriteRecipes","getRecipeProgress","setFavoriteRecipes","RecipesContext","ShareButton","FavoriteButton","requestFoodsOrDrinks","requestRecipesById","currentURL","window","location","href","MAX_RECOMENDATION_CARDS","BeverageDetails","props","id","match","params","history","recipeInfo","setRecipeInfo","strDrinkThumb","strDrink","strCategory","strAlcoholic","strInstructions","isDone","setIsDone","isInProgress","setIsInProgressDone","renderRecomendations","setRecomendations","isFavorite","setIsFavorite","isCopied","setIsCopied","sliceIngredients","sliceMeasures","currentRecipeIsDone","find","recipe","currentRecipeIsInProgress","cocktails","then","drinks","meals","slice","ingredientsList","measuresList","handleFavoriteDependencies","type","area","category","alcoholicOrNot","name","image","map","ingredient","index","food","idMeal","strMeal","strMealThumb","push"],"sources":["/Users/brenoaraujo/projects-to-github/RecipeApp/src/pages/BeverageDetails.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router';\nimport Card from '../components/Card';\nimport {\n  getDoneRecipes,\n  getFavoriteRecipes,\n  getRecipeProgress,\n  setFavoriteRecipes,\n} from '../services/localStorage';\nimport '../css/RecipeDetails.css';\nimport RecipesContext from '../context/RecipesContext';\nimport ShareButton from '../components/ShareButton';\nimport FavoriteButton from '../components/FavoriteButton';\nimport { requestFoodsOrDrinks, requestRecipesById } from '../services/fetchAPIs';\n\nconst currentURL = window.location.href;\n\nconst MAX_RECOMENDATION_CARDS = 6;\n\nfunction BeverageDetails(props) {\n  const {\n    match: {\n      params: { id },\n    },\n  } = props;\n  const history = useHistory();\n  const [recipeInfo, setRecipeInfo] = useState({});\n  const {\n    strDrinkThumb,\n    strDrink,\n    strCategory,\n    strAlcoholic,\n    strInstructions,\n  } = recipeInfo;\n  const [isDone, setIsDone] = useState(false);\n  const [isInProgress, setIsInProgressDone] = useState(false);\n  const [renderRecomendations, setRecomendations] = useState([]);\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [isCopied, setIsCopied] = useState(false);\n  const { sliceIngredients, sliceMeasures } = useContext(RecipesContext);\n\n  useEffect(() => {\n    if (getDoneRecipes()) {\n      const currentRecipeIsDone = getDoneRecipes().find((recipe) => recipe.id === id);\n      return setIsDone(currentRecipeIsDone);\n    }\n    return setIsDone(false);\n  }, [id]);\n\n  useEffect(() => {\n    if (getRecipeProgress()) {\n      const currentRecipeIsInProgress = !!getRecipeProgress().cocktails[id];\n      return setIsInProgressDone(currentRecipeIsInProgress);\n    }\n    return setIsInProgressDone(false);\n  }, [id]);\n\n  useEffect(() => {\n    requestRecipesById(id, 'thecocktaildb')\n      .then(({ drinks }) => setRecipeInfo(drinks[0]));\n  }, [id]);\n\n  useEffect(() => {\n    requestFoodsOrDrinks('themealdb')\n      .then(({ meals }) => setRecomendations(meals.slice(0, MAX_RECOMENDATION_CARDS)));\n  }, []);\n\n  useEffect(() => {\n    if (getFavoriteRecipes()) {\n      return setIsFavorite(\n        getFavoriteRecipes().find((recipe) => recipe.id === id),\n      );\n    }\n    setFavoriteRecipes([]);\n  }, [id]);\n\n  const ingredientsList = sliceIngredients(recipeInfo);\n  const measuresList = sliceMeasures(recipeInfo);\n\n  const handleFavoriteDependencies = {\n    id,\n    type: 'bebida',\n    area: '',\n    category: strCategory,\n    alcoholicOrNot: strAlcoholic,\n    name: strDrink,\n    image: strDrinkThumb,\n  };\n\n  return (\n    <div className=\"page-container\">\n      <img\n        className=\"details__image\"\n        src={ strDrinkThumb }\n        alt=\"food\"\n        data-testid=\"recipe-photo\"\n      />\n      <div className=\"title-container\">\n        <div className=\"titles\">\n          <h2 className=\"details__category\" data-testid=\"recipe-category\">\n            {strAlcoholic}\n          </h2>\n          <h1 className=\"details__title\" data-testid=\"recipe-title\">\n            {strDrink}\n          </h1>\n        </div>\n        <div className=\"details\">\n          <ShareButton\n            textToCopy={ currentURL }\n            setIsCopied={ setIsCopied }\n            isCopied={ isCopied }\n          />\n          <FavoriteButton\n            isFavorite={ isFavorite }\n            setIsFavorite={ setIsFavorite }\n            id={ id }\n            favoriteDependencies={ handleFavoriteDependencies }\n          />\n        </div>\n      </div>\n      <p className=\"details__description margin-left\">Ingredientes:</p>\n      <ul className=\"ingredient-list\">\n        {ingredientsList.map((ingredient, index) => (\n          <li\n            className=\"details__ingredient\"\n            key={ ingredient }\n            data-testid={ `${index}-ingredient-name-and-measure` }\n          >\n            <span className=\"details__ingredient-name\">{`${ingredient}: `}</span>\n            {measuresList[index] ? (\n              <span className=\"details__measure\">{measuresList[index]}</span>\n            ) : (\n              ''\n            )}\n          </li>\n        ))}\n      </ul>\n      <p className=\"details__description--instructions\">Instruções:</p>\n      <p className=\"details__instructions\" data-testid=\"instructions\">\n        {strInstructions}\n      </p>\n      <div className=\"recomended\">\n        <p className=\"details__description center-this\">Ótimos acompanhamentos:</p>\n        <div className=\"carousel\">\n          {renderRecomendations\n            && renderRecomendations.map((food, index) => (\n              <Card\n                id=\"idMeal\"\n                itemId={ food.idMeal }\n                header={ food.strMeal }\n                img={ food.strMealThumb }\n                index={ index }\n                key={ food.idMeal }\n                testId={ `${index}-recomendation-card` }\n              />\n            ))}\n        </div>\n      </div>\n      <button\n        className={ isDone ? 'hidden-start-recipe-btn' : 'login__btn start-recipe' }\n        type=\"button\"\n        onClick={ () => history.push(`/bebidas/${id}/in-progress`) }\n        data-testid=\"start-recipe-btn\"\n      >\n        {isInProgress ? 'Continuar Receita' : 'Iniciar Receita' }\n      </button>\n    </div>\n  );\n}\n\nBeverageDetails.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string.isRequired,\n    }).isRequired,\n  }).isRequired,\n};\n\nexport default BeverageDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
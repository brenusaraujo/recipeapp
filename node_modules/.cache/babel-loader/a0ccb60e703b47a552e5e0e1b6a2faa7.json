{"ast":null,"code":"/**\n * @fileoverview Rule to flag unsafe statements in finally block\n * @author Onur Temizkan\n */\n\"use strict\"; //------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n\nconst SENTINEL_NODE_TYPE_RETURN_THROW = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression)$/u;\nconst SENTINEL_NODE_TYPE_BREAK = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression|DoWhileStatement|WhileStatement|ForOfStatement|ForInStatement|ForStatement|SwitchStatement)$/u;\nconst SENTINEL_NODE_TYPE_CONTINUE = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression|DoWhileStatement|WhileStatement|ForOfStatement|ForInStatement|ForStatement)$/u; //------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\nmodule.exports = {\n  meta: {\n    type: \"problem\",\n    docs: {\n      description: \"disallow control flow statements in `finally` blocks\",\n      category: \"Possible Errors\",\n      recommended: true,\n      url: \"https://eslint.org/docs/rules/no-unsafe-finally\"\n    },\n    schema: [],\n    messages: {\n      unsafeUsage: \"Unsafe usage of {{nodeType}}.\"\n    }\n  },\n\n  create(context) {\n    /**\n     * Checks if the node is the finalizer of a TryStatement\n     * @param {ASTNode} node node to check.\n     * @returns {boolean} - true if the node is the finalizer of a TryStatement\n     */\n    function isFinallyBlock(node) {\n      return node.parent.type === \"TryStatement\" && node.parent.finalizer === node;\n    }\n    /**\n     * Climbs up the tree if the node is not a sentinel node\n     * @param {ASTNode} node node to check.\n     * @param {string} label label of the break or continue statement\n     * @returns {boolean} - return whether the node is a finally block or a sentinel node\n     */\n\n\n    function isInFinallyBlock(node, label) {\n      let labelInside = false;\n      let sentinelNodeType;\n\n      if (node.type === \"BreakStatement\" && !node.label) {\n        sentinelNodeType = SENTINEL_NODE_TYPE_BREAK;\n      } else if (node.type === \"ContinueStatement\") {\n        sentinelNodeType = SENTINEL_NODE_TYPE_CONTINUE;\n      } else {\n        sentinelNodeType = SENTINEL_NODE_TYPE_RETURN_THROW;\n      }\n\n      for (let currentNode = node; currentNode && !sentinelNodeType.test(currentNode.type); currentNode = currentNode.parent) {\n        if (currentNode.parent.label && label && currentNode.parent.label.name === label.name) {\n          labelInside = true;\n        }\n\n        if (isFinallyBlock(currentNode)) {\n          if (label && labelInside) {\n            return false;\n          }\n\n          return true;\n        }\n      }\n\n      return false;\n    }\n    /**\n     * Checks whether the possibly-unsafe statement is inside a finally block.\n     * @param {ASTNode} node node to check.\n     * @returns {void}\n     */\n\n\n    function check(node) {\n      if (isInFinallyBlock(node, node.label)) {\n        context.report({\n          messageId: \"unsafeUsage\",\n          data: {\n            nodeType: node.type\n          },\n          node,\n          line: node.loc.line,\n          column: node.loc.column\n        });\n      }\n    }\n\n    return {\n      ReturnStatement: check,\n      ThrowStatement: check,\n      BreakStatement: check,\n      ContinueStatement: check\n    };\n  }\n\n};","map":{"version":3,"names":["SENTINEL_NODE_TYPE_RETURN_THROW","SENTINEL_NODE_TYPE_BREAK","SENTINEL_NODE_TYPE_CONTINUE","module","exports","meta","type","docs","description","category","recommended","url","schema","messages","unsafeUsage","create","context","isFinallyBlock","node","parent","finalizer","isInFinallyBlock","label","labelInside","sentinelNodeType","currentNode","test","name","check","report","messageId","data","nodeType","line","loc","column","ReturnStatement","ThrowStatement","BreakStatement","ContinueStatement"],"sources":["/Users/brenoaraujo/Projetos Trybe/sd-022-b-project-recipes-app/node_modules/eslint/lib/rules/no-unsafe-finally.js"],"sourcesContent":["/**\n * @fileoverview Rule to flag unsafe statements in finally block\n * @author Onur Temizkan\n */\n\n\"use strict\";\n\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n\nconst SENTINEL_NODE_TYPE_RETURN_THROW = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression)$/u;\nconst SENTINEL_NODE_TYPE_BREAK = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression|DoWhileStatement|WhileStatement|ForOfStatement|ForInStatement|ForStatement|SwitchStatement)$/u;\nconst SENTINEL_NODE_TYPE_CONTINUE = /^(?:Program|(?:Function|Class)(?:Declaration|Expression)|ArrowFunctionExpression|DoWhileStatement|WhileStatement|ForOfStatement|ForInStatement|ForStatement)$/u;\n\n\n//------------------------------------------------------------------------------\n// Rule Definition\n//------------------------------------------------------------------------------\n\nmodule.exports = {\n    meta: {\n        type: \"problem\",\n\n        docs: {\n            description: \"disallow control flow statements in `finally` blocks\",\n            category: \"Possible Errors\",\n            recommended: true,\n            url: \"https://eslint.org/docs/rules/no-unsafe-finally\"\n        },\n\n        schema: [],\n\n        messages: {\n            unsafeUsage: \"Unsafe usage of {{nodeType}}.\"\n        }\n    },\n    create(context) {\n\n        /**\n         * Checks if the node is the finalizer of a TryStatement\n         * @param {ASTNode} node node to check.\n         * @returns {boolean} - true if the node is the finalizer of a TryStatement\n         */\n        function isFinallyBlock(node) {\n            return node.parent.type === \"TryStatement\" && node.parent.finalizer === node;\n        }\n\n        /**\n         * Climbs up the tree if the node is not a sentinel node\n         * @param {ASTNode} node node to check.\n         * @param {string} label label of the break or continue statement\n         * @returns {boolean} - return whether the node is a finally block or a sentinel node\n         */\n        function isInFinallyBlock(node, label) {\n            let labelInside = false;\n            let sentinelNodeType;\n\n            if (node.type === \"BreakStatement\" && !node.label) {\n                sentinelNodeType = SENTINEL_NODE_TYPE_BREAK;\n            } else if (node.type === \"ContinueStatement\") {\n                sentinelNodeType = SENTINEL_NODE_TYPE_CONTINUE;\n            } else {\n                sentinelNodeType = SENTINEL_NODE_TYPE_RETURN_THROW;\n            }\n\n            for (\n                let currentNode = node;\n                currentNode && !sentinelNodeType.test(currentNode.type);\n                currentNode = currentNode.parent\n            ) {\n                if (currentNode.parent.label && label && (currentNode.parent.label.name === label.name)) {\n                    labelInside = true;\n                }\n                if (isFinallyBlock(currentNode)) {\n                    if (label && labelInside) {\n                        return false;\n                    }\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        /**\n         * Checks whether the possibly-unsafe statement is inside a finally block.\n         * @param {ASTNode} node node to check.\n         * @returns {void}\n         */\n        function check(node) {\n            if (isInFinallyBlock(node, node.label)) {\n                context.report({\n                    messageId: \"unsafeUsage\",\n                    data: {\n                        nodeType: node.type\n                    },\n                    node,\n                    line: node.loc.line,\n                    column: node.loc.column\n                });\n            }\n        }\n\n        return {\n            ReturnStatement: check,\n            ThrowStatement: check,\n            BreakStatement: check,\n            ContinueStatement: check\n        };\n    }\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AAEA,a,CAEA;AACA;AACA;;AAEA,MAAMA,+BAA+B,GAAG,qFAAxC;AACA,MAAMC,wBAAwB,GAAG,gLAAjC;AACA,MAAMC,2BAA2B,GAAG,gKAApC,C,CAGA;AACA;AACA;;AAEAC,MAAM,CAACC,OAAP,GAAiB;EACbC,IAAI,EAAE;IACFC,IAAI,EAAE,SADJ;IAGFC,IAAI,EAAE;MACFC,WAAW,EAAE,sDADX;MAEFC,QAAQ,EAAE,iBAFR;MAGFC,WAAW,EAAE,IAHX;MAIFC,GAAG,EAAE;IAJH,CAHJ;IAUFC,MAAM,EAAE,EAVN;IAYFC,QAAQ,EAAE;MACNC,WAAW,EAAE;IADP;EAZR,CADO;;EAiBbC,MAAM,CAACC,OAAD,EAAU;IAEZ;AACR;AACA;AACA;AACA;IACQ,SAASC,cAAT,CAAwBC,IAAxB,EAA8B;MAC1B,OAAOA,IAAI,CAACC,MAAL,CAAYb,IAAZ,KAAqB,cAArB,IAAuCY,IAAI,CAACC,MAAL,CAAYC,SAAZ,KAA0BF,IAAxE;IACH;IAED;AACR;AACA;AACA;AACA;AACA;;;IACQ,SAASG,gBAAT,CAA0BH,IAA1B,EAAgCI,KAAhC,EAAuC;MACnC,IAAIC,WAAW,GAAG,KAAlB;MACA,IAAIC,gBAAJ;;MAEA,IAAIN,IAAI,CAACZ,IAAL,KAAc,gBAAd,IAAkC,CAACY,IAAI,CAACI,KAA5C,EAAmD;QAC/CE,gBAAgB,GAAGvB,wBAAnB;MACH,CAFD,MAEO,IAAIiB,IAAI,CAACZ,IAAL,KAAc,mBAAlB,EAAuC;QAC1CkB,gBAAgB,GAAGtB,2BAAnB;MACH,CAFM,MAEA;QACHsB,gBAAgB,GAAGxB,+BAAnB;MACH;;MAED,KACI,IAAIyB,WAAW,GAAGP,IADtB,EAEIO,WAAW,IAAI,CAACD,gBAAgB,CAACE,IAAjB,CAAsBD,WAAW,CAACnB,IAAlC,CAFpB,EAGImB,WAAW,GAAGA,WAAW,CAACN,MAH9B,EAIE;QACE,IAAIM,WAAW,CAACN,MAAZ,CAAmBG,KAAnB,IAA4BA,KAA5B,IAAsCG,WAAW,CAACN,MAAZ,CAAmBG,KAAnB,CAAyBK,IAAzB,KAAkCL,KAAK,CAACK,IAAlF,EAAyF;UACrFJ,WAAW,GAAG,IAAd;QACH;;QACD,IAAIN,cAAc,CAACQ,WAAD,CAAlB,EAAiC;UAC7B,IAAIH,KAAK,IAAIC,WAAb,EAA0B;YACtB,OAAO,KAAP;UACH;;UACD,OAAO,IAAP;QACH;MACJ;;MACD,OAAO,KAAP;IACH;IAED;AACR;AACA;AACA;AACA;;;IACQ,SAASK,KAAT,CAAeV,IAAf,EAAqB;MACjB,IAAIG,gBAAgB,CAACH,IAAD,EAAOA,IAAI,CAACI,KAAZ,CAApB,EAAwC;QACpCN,OAAO,CAACa,MAAR,CAAe;UACXC,SAAS,EAAE,aADA;UAEXC,IAAI,EAAE;YACFC,QAAQ,EAAEd,IAAI,CAACZ;UADb,CAFK;UAKXY,IALW;UAMXe,IAAI,EAAEf,IAAI,CAACgB,GAAL,CAASD,IANJ;UAOXE,MAAM,EAAEjB,IAAI,CAACgB,GAAL,CAASC;QAPN,CAAf;MASH;IACJ;;IAED,OAAO;MACHC,eAAe,EAAER,KADd;MAEHS,cAAc,EAAET,KAFb;MAGHU,cAAc,EAAEV,KAHb;MAIHW,iBAAiB,EAAEX;IAJhB,CAAP;EAMH;;AAzFY,CAAjB"},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"var _jsxFileName = \"/Users/brenoaraujo/projects-to-github/RecipeApp/src/components/SearchForm.js\";\nimport React, { useContext, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport RecipesContext from '../context/RecipesContext';\nimport { requestFilteredFoods, requestFilteredDrinks } from '../services/fetchAPIs';\nimport '../css/SearchForm.css';\nfunction SearchForm() {\n  const {\n    setFilteredFood,\n    setFilteredBeverage\n  } = useContext(RecipesContext);\n  const [searchText, setSearchText] = useState('');\n  const [selectedRadio, setSelectedRadio] = useState('');\n  const history = useHistory();\n  const handleRadio = _ref => {\n    let {\n      target: {\n        value\n      }\n    } = _ref;\n    setSelectedRadio(value);\n  };\n  const alertLetter = () => {\n    global.alert('Sua busca deve conter somente 1 (um) caracter');\n  };\n  const redirectByLength = (result, category) => {\n    if (result.length === 1) {\n      const id = category === 'comidas' ? 'idMeal' : 'idDrink';\n      history.push(`/${category}/${result[0][id]}`);\n    } else {\n      return category === 'comidas' ? setFilteredFood(result) : setFilteredBeverage(result);\n    }\n  };\n  const handleClick = async () => {\n    if (selectedRadio === 'letter' && searchText.length > 1) {\n      return alertLetter();\n    }\n    const {\n      pathname\n    } = history.location;\n    try {\n      if (pathname === '/bebidas' || pathname === '/bebidas/') {\n        const result = await requestFilteredDrinks(searchText, selectedRadio);\n        redirectByLength(result.drinks, 'bebidas');\n      } else {\n        const result = await requestFilteredFoods(searchText, selectedRadio);\n        redirectByLength(result.meals, 'comidas');\n      }\n    } catch (error) {\n      global.alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n      return error;\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"form\", {\n    className: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search__main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Pesquisar\",\n    className: \"search__input\",\n    type: \"text\",\n    \"data-testid\": \"search-input\",\n    onChange: _ref2 => {\n      let {\n        target: {\n          value\n        }\n      } = _ref2;\n      return setSearchText(value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"login__btn search__btn\",\n    type: \"button\",\n    \"data-testid\": \"exec-search-btn\",\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, \"Busca\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search__filter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"search__label\",\n    htmlFor: \"ingredient\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"search__checkbox\",\n    id: \"ingredient\",\n    name: \"searchType\",\n    type: \"radio\",\n    value: \"ingredient\",\n    \"data-testid\": \"ingredient-search-radio\",\n    onChange: handleRadio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }), \"Ingrediente\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"search__label\",\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"search__checkbox\",\n    id: \"name\",\n    name: \"searchType\",\n    type: \"radio\",\n    value: \"name\",\n    \"data-testid\": \"name-search-radio\",\n    onChange: handleRadio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }), \"Nome\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"search__label\",\n    htmlFor: \"letter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"search__checkbox\",\n    id: \"letter\",\n    name: \"searchType\",\n    type: \"radio\",\n    value: \"letter\",\n    \"data-testid\": \"first-letter-search-radio\",\n    onChange: handleRadio,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }), \"Letra\")));\n}\nexport default SearchForm;","map":{"version":3,"names":["React","useContext","useState","useHistory","RecipesContext","requestFilteredFoods","requestFilteredDrinks","SearchForm","setFilteredFood","setFilteredBeverage","searchText","setSearchText","selectedRadio","setSelectedRadio","history","handleRadio","target","value","alertLetter","global","alert","redirectByLength","result","category","length","id","push","handleClick","pathname","location","drinks","meals","error"],"sources":["/Users/brenoaraujo/projects-to-github/RecipeApp/src/components/SearchForm.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport RecipesContext from '../context/RecipesContext';\nimport {\n  requestFilteredFoods,\n  requestFilteredDrinks,\n} from '../services/fetchAPIs';\nimport '../css/SearchForm.css';\n\nfunction SearchForm() {\n  const { setFilteredFood, setFilteredBeverage } = useContext(RecipesContext);\n  const [searchText, setSearchText] = useState('');\n  const [selectedRadio, setSelectedRadio] = useState('');\n  const history = useHistory();\n\n  const handleRadio = ({ target: { value } }) => {\n    setSelectedRadio(value);\n  };\n\n  const alertLetter = () => {\n    global.alert('Sua busca deve conter somente 1 (um) caracter');\n  };\n\n  const redirectByLength = (result, category) => {\n    if (result.length === 1) {\n      const id = category === 'comidas' ? 'idMeal' : 'idDrink';\n      history.push(`/${category}/${result[0][id]}`);\n    } else {\n      return category === 'comidas'\n        ? setFilteredFood(result)\n        : setFilteredBeverage(result);\n    }\n  };\n\n  const handleClick = async () => {\n    if (selectedRadio === 'letter' && searchText.length > 1) {\n      return alertLetter();\n    }\n\n    const { pathname } = history.location;\n\n    try {\n      if (pathname === '/bebidas' || pathname === '/bebidas/') {\n        const result = await requestFilteredDrinks(searchText, selectedRadio);\n        redirectByLength(result.drinks, 'bebidas');\n      } else {\n        const result = await requestFilteredFoods(searchText, selectedRadio);\n        redirectByLength(result.meals, 'comidas');\n      }\n    } catch (error) {\n      global.alert(\n        'Sinto muito, não encontramos nenhuma receita para esses filtros.',\n      );\n      return error;\n    }\n  };\n\n  return (\n    <form className=\"search\">\n      <div className=\"search__main\">\n        <input\n          placeholder=\"Pesquisar\"\n          className=\"search__input\"\n          type=\"text\"\n          data-testid=\"search-input\"\n          onChange={ ({ target: { value } }) => setSearchText(value) }\n        />\n        <button\n          className=\"login__btn search__btn\"\n          type=\"button\"\n          data-testid=\"exec-search-btn\"\n          onClick={ handleClick }\n        >\n          Busca\n        </button>\n      </div>\n      <div className=\"search__filter\">\n        <label className=\"search__label\" htmlFor=\"ingredient\">\n          <input\n            className=\"search__checkbox\"\n            id=\"ingredient\"\n            name=\"searchType\"\n            type=\"radio\"\n            value=\"ingredient\"\n            data-testid=\"ingredient-search-radio\"\n            onChange={ handleRadio }\n          />\n          Ingrediente\n        </label>\n        <label className=\"search__label\" htmlFor=\"name\">\n          <input\n            className=\"search__checkbox\"\n            id=\"name\"\n            name=\"searchType\"\n            type=\"radio\"\n            value=\"name\"\n            data-testid=\"name-search-radio\"\n            onChange={ handleRadio }\n          />\n          Nome\n        </label>\n        <label className=\"search__label\" htmlFor=\"letter\">\n          <input\n            className=\"search__checkbox\"\n            id=\"letter\"\n            name=\"searchType\"\n            type=\"radio\"\n            value=\"letter\"\n            data-testid=\"first-letter-search-radio\"\n            onChange={ handleRadio }\n          />\n          Letra\n        </label>\n      </div>\n    </form>\n  );\n}\n\nexport default SearchForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}